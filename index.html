<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oufaa Is My Whole Universe üååüíï‚ú®</title>

    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Playfair+Display:wght@700&family=Comic+Neue:wght@700&display=swap" rel="stylesheet">

    <style>
        * { margin:0; padding:0; box-sizing:border-box; }
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #0f001a, #1a0033, #330033);
            color: #fff;
            overflow: hidden;
            height: 100vh;
        }

        canvas {
            position: fixed;
            top: 0; left: 0;
            pointer-events: none;
        }
        #trailCanvas { z-index: 9998; }
        #confettiCanvas { z-index: 9999; }

        .layer { position: fixed; width: 100%; height: 100%; background-repeat: repeat; animation: move 180s linear infinite; }
        .layer1 { background-image: url('https://www.transparenttextures.com/patterns/stardust.png'); z-index: -6; opacity: 0.7; }
        .layer2 { background-image: url('https://www.transparenttextures.com/patterns/tiny-stars.png'); animation-duration: 250s; z-index: -5; opacity: 0.8; }
        .layer3 { background: radial-gradient(circle at 50% 50%, rgba(255,182,193,0.12), transparent 60%); z-index: -4; }
        @keyframes move { from { background-position: 0 0; } to { background-position: -8000px 4000px; } }

        .sparkle { 
            position: absolute; width: 5px; height: 5px; background: #fff; border-radius: 50%; 
            box-shadow: 0 0 15px #ff9ec1, 0 0 30px #ff69b4; animation: twinkle 3s infinite alternate; pointer-events: none; 
        }
        @keyframes twinkle { 0% { opacity: 0.4; transform: scale(0.7); } 100% { opacity: 1; transform: scale(1.5); } }

        .shooting-star { position: absolute; width: 3px; height: 120px; background: linear-gradient(-45deg, #fff, #ff9ec1, transparent); animation: shoot 5s linear infinite; opacity: 0.85; }
        @keyframes shoot { 0% { transform: translateX(0) translateY(0) rotate(45deg); opacity: 0.85; } 100% { transform: translateX(-1600px) translateY(1600px) rotate(45deg); opacity: 0; } }

        .flash { position: fixed; width: 100%; height: 100%; background: linear-gradient(to bottom, #ff9ec1, white); opacity: 0; z-index: 10000; pointer-events: none; transition: opacity 0.4s; }

        .ripple { 
            position: absolute; top: 50%; left: 50%; width: 0; height: 0; border-radius: 50%; 
            border: 2px solid rgba(255,105,180,0.4); transform: translate(-50%, -50%); opacity: 0; pointer-events: none; 
            animation: rippleWave 3s ease-out forwards; 
        }
        @keyframes rippleWave { 0% { width: 0; height: 0; opacity: 0.6; } 100% { width: 1200px; height: 1200px; opacity: 0; } }

        #intro { position: fixed; width: 100%; height: 100%; background: linear-gradient(135deg, #ff9ec1, #c71585); display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 999; text-align: center; color: white; font-family: 'Comic Neue', cursive; }
        #countdown { font-size: 120px; text-shadow: 0 0 20px #fff, 0 0 40px #ff69b4; animation: pulse 1s infinite alternate; }
        @keyframes pulse { from { transform: scale(1); } to { transform: scale(1.15); } }

        .container { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); backdrop-filter: blur(30px); background: rgba(255, 182, 193, 0.18); padding: 50px 30px; border-radius: 40px; text-align: center; width: 92%; max-width: 520px; box-shadow: 0 0 60px rgba(255, 105, 180, 0.5), inset 0 0 30px rgba(255,255,255,0.2); display: none; animation: fadeIn 2.5s ease forwards; border: 3px solid #ff69b4; z-index: 1000; }
        @keyframes fadeIn { from { opacity: 0; transform: translate(-50%, -70%) scale(0.8); } to { opacity: 1; transform: translate(-50%, -50%) scale(1); } }

        h1 { font-family: 'Playfair Display', serif; font-size: 42px; margin-bottom: 20px; color: #fff; text-shadow: 0 0 15px #ff69b4; }
        #typing, .memory { line-height: 1.6; font-size: 20px; margin: 20px 0; }

        input { padding: 14px; border-radius: 30px; border: 2px solid #ff69b4; margin: 20px 0 10px; width: 80%; font-size: 18px; background: rgba(255,255,255,0.15); color: white; text-align: center; }
        input::placeholder { color: #ffb6c1; }

        button { padding: 18px 50px; border: none; border-radius: 50px; background: linear-gradient(45deg, #ff69b4, #ff1493); color: white; font-size: 22px; font-weight: bold; cursor: pointer; transition: all 0.4s; box-shadow: 0 10px 30px rgba(255,105,180,0.6); margin: 15px 0; }
        button:hover { transform: scale(1.15) rotate(3deg); background: linear-gradient(45deg, #ff1493, #ff69b4); box-shadow: 0 15px 40px rgba(255,20,147,0.8); }

        .constellation { font-size: 48px; letter-spacing: 15px; color: #fff; text-shadow: 0 0 20px #ff69b4, 0 0 40px #ff1493; animation: glow 4s infinite alternate; margin: 30px 0 10px; font-family: 'Comic Neue', cursive; }
        @keyframes glow { from { text-shadow: 0 0 10px #fff, 0 0 30px #ff69b4; } to { text-shadow: 0 0 30px #fff, 0 0 60px #ff1493; } }

        .love-note { font-family: 'Playfair Display', serif; font-size: 26px; color: #ffebee; margin: 30px 0 20px; opacity: 0; animation: fadeInNote 4s forwards 1s; line-height: 1.5; }
        @keyframes fadeInNote { to { opacity: 1; } }

        .memory { opacity: 0; animation: fadeInNote 5s forwards 3s; font-style: italic; color: #ffcccb; }

        .timer { font-size: 18px; color: #ffb6c1; margin-top: 25px; font-weight: 600; }

        .heart { 
            position: absolute; font-size: 32px; animation: float 8s infinite ease-in-out; pointer-events: none; 
            text-shadow: 0 0 12px #ff69b4; transform: rotate(0deg); 
        }
        @keyframes float { 
            0% { transform: translateY(110vh) rotate(0deg); opacity: 1; } 
            100% { transform: translateY(-20vh) rotate(720deg); opacity: 0; } 
        }

        .big-heart { 
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0); font-size: 200px; opacity: 0; 
            z-index: 9999; animation: bigHeartPulse 6s ease-in-out forwards; pointer-events: none; filter: drop-shadow(0 0 30px #ff69b4); 
        }
        @keyframes bigHeartPulse { 
            0% { transform: translate(-50%, -50%) scale(0); opacity: 0; } 
            20% { transform: translate(-50%, -50%) scale(1.3); opacity: 1; } 
            50% { transform: translate(-50%, -50%) scale(1.1); opacity: 0.9; } 
            100% { transform: translate(-50%, -50%) scale(1.5); opacity: 0; } 
        }

        footer { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); font-size: 16px; color: #ffb6c1; opacity: 0; animation: fadeInNote 6s forwards 4s; font-family: 'Comic Neue', cursive; z-index: 100; }
    </style>
</head>
<body>

    <canvas id="trailCanvas"></canvas>
    <canvas id="confettiCanvas"></canvas>

    <audio id="heartbeat" loop volume="0.3">
        <source src="heartbeat.mp3" type="audio/mpeg">
    </audio>

    <audio id="sparkle">
        <source src="sparkle.mp3" type="audio/mpeg">
    </audio>

    <audio id="whoosh">
        <source src="whoosh.mp3" type="audio/mpeg">
    </audio>

    <audio id="bgMusic" loop volume="0.25">
        <source src="piano-bg.mp3" type="audio/mpeg">
    </audio>

    <div class="layer layer1"></div>
    <div class="layer layer2"></div>
    <div class="layer layer3"></div>
    <div class="flash" id="flash"></div>

    <div id="intro">
        <div id="countdown">3</div>
        <p style="font-size:40px; margin-top:20px;">For my forever person üíï</p>
    </div>

    <div class="container" id="main">
        <h1 id="typing"></h1>

        <input type="password" id="password" placeholder="Our super secret word ‚ô°">
        <br>
        <button id="unlockBtn">Unlock My Heart for Oufaa! üíñüåü</button>

        <div id="content" style="display:none; position: relative;">
            <div class="constellation">O U F A A ‚ô°</div>
            <p class="message">In this huge universe full of stars... you're my favorite galaxy, my sweetest dream, my forever home. üí´‚ù§Ô∏è<br>I love you more than all the twinkles in the sky! üåå‚ú®</p>
            
            <div class="love-note" id="loveNote">Every single day I wake up grateful that the universe led me to you.<br>You are my safe place, my biggest smile, my reason to believe in forever.</div>
            
            <div class="memory" id="memoryText">And if I had to choose again... I would still choose you. Every time. In every lifetime.</div>
            
            <div class="timer" id="loveTimer"></div>

            <div class="ripple" id="rippleEffect"></div>
        </div>
    </div>

    <div class="big-heart" id="finalHeart">üíñ</div>

    <footer>I choose you today, tomorrow, and every single day after that ‚ô° Nicky</footer>

    <script>
    document.addEventListener("DOMContentLoaded", () => {
        // === Mouse Heart Trail (from previous) ===
        const trailCanvas = document.getElementById("trailCanvas");
        const trailCtx = trailCanvas.getContext("2d");
        trailCanvas.width = window.innerWidth;
        trailCanvas.height = window.innerHeight;

        window.addEventListener("resize", () => {
            trailCanvas.width = window.innerWidth;
            trailCanvas.height = window.innerHeight;
        });

        let trailParticles = [];
        const maxTrail = 80;

        class TrailHeart {
            constructor(x, y) {
                this.x = x; this.y = y;
                this.size = Math.random() * 12 + 8;
                this.opacity = 1;
                this.color = `hsl(${Math.random() * 30 + 330}, 90%, 65%)`;
                this.vx = (Math.random() - 0.5) * 1.5;
                this.vy = (Math.random() - 0.5) * 1.5;
                this.life = 0;
                this.maxLife = Math.random() * 60 + 80;
            }
            update() { this.x += this.vx; this.y += this.vy; this.opacity = 1 - (this.life / this.maxLife); this.life++; }
            draw() {
                trailCtx.save(); trailCtx.globalAlpha = this.opacity; trailCtx.fillStyle = this.color;
                trailCtx.beginPath(); trailCtx.arc(this.x, this.y, this.size / 2, 0, Math.PI * 2); trailCtx.fill();
                trailCtx.restore();
            }
        }

        function animateTrail() {
            trailCtx.clearRect(0, 0, trailCanvas.width, trailCanvas.height);
            trailParticles.forEach((p, i) => { p.update(); p.draw(); if (p.life >= p.maxLife) trailParticles.splice(i, 1); });
            requestAnimationFrame(animateTrail);
        }
        animateTrail();

        let lastX = 0, lastY = 0;
        document.addEventListener("mousemove", (e) => {
            const dx = e.clientX - lastX; const dy = e.clientY - lastY;
            const dist = Math.sqrt(dx*dx + dy*dy);
            const count = Math.min(Math.floor(dist / 8) + 1, 5);
            for (let i = 0; i < count; i++) {
                if (trailParticles.length < maxTrail) trailParticles.push(new TrailHeart(e.clientX, e.clientY));
            }
            lastX = e.clientX; lastY = e.clientY;
        });

        // === Confetti Burst Canvas ===
        const confettiCanvas = document.getElementById("confettiCanvas");
        const confettiCtx = confettiCanvas.getContext("2d");
        confettiCanvas.width = window.innerWidth;
        confettiCanvas.height = window.innerHeight;

        window.addEventListener("resize", () => {
            confettiCanvas.width = window.innerWidth;
            confettiCanvas.height = window.innerHeight;
        });

        let confettiParticles = [];

        class Confetti {
            constructor() {
                this.x = confettiCanvas.width / 2;
                this.y = confettiCanvas.height / 2 - 100; // start a bit above center
                this.size = Math.random() * 8 + 4;
                this.rotation = Math.random() * 360;
                this.rotationSpeed = (Math.random() - 0.5) * 10;
                this.color = ['#ff69b4', '#ff1493', '#ffb6c1', '#ffffff', '#ff85c2', '#db7093'][Math.floor(Math.random()*6)];
                this.velocityX = (Math.random() - 0.5) * 12;
                this.velocityY = Math.random() * -15 - 5; // upward burst
                this.gravity = 0.25;
                this.opacity = 1;
                this.life = 0;
                this.maxLife = Math.random() * 80 + 120;
            }

            update() {
                this.velocityY += this.gravity;
                this.x += this.velocityX;
                this.y += this.velocityY;
                this.rotation += this.rotationSpeed;
                this.opacity = 1 - (this.life / this.maxLife);
                this.life++;
            }

            draw() {
                confettiCtx.save();
                confettiCtx.globalAlpha = this.opacity;
                confettiCtx.fillStyle = this.color;
                confettiCtx.translate(this.x, this.y);
                confettiCtx.rotate(this.rotation * Math.PI / 180);
                confettiCtx.fillRect(-this.size / 2, -this.size / 2, this.size, this.size);
                confettiCtx.restore();
            }
        }

        function animateConfetti() {
            confettiCtx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
            confettiParticles.forEach((p, i) => {
                p.update();
                p.draw();
                if (p.life >= p.maxLife || p.y > confettiCanvas.height + 50) confettiParticles.splice(i, 1);
            });
            if (confettiParticles.length > 0) requestAnimationFrame(animateConfetti);
        }

        function confettiBurst() {
            const burstCount = 180; // adjust for intensity
            for (let i = 0; i < burstCount; i++) {
                confettiParticles.push(new Confetti());
            }
            animateConfetti(); // start loop if not already running
        }

        // === Rest of your logic (audio, countdown, unlock, etc.) ===
        const heartbeat = document.getElementById("heartbeat");
        const sparkle = document.getElementById("sparkle");
        const whoosh = document.getElementById("whoosh");
        const bgMusic = document.getElementById("bgMusic");
        const finalHeart = document.getElementById("finalHeart");
        const ripple = document.getElementById("rippleEffect");

        let count = 3;
        const countdownEl = document.getElementById("countdown");
        const intro = document.getElementById("intro");
        const main = document.getElementById("main");

        const countdownInterval = setInterval(() => {
            count--;
            if (count > 0) {
                countdownEl.innerText = count;
            } else {
                clearInterval(countdownInterval);
                intro.style.display = "none";
                main.style.display = "block";
                typeWriter();
                addSparkles(60);
            }
        }, 1000);

        const text = "Hey cutie pie... In a universe full of billions of twinkly stars...\nI found my brightest, sweetest one...\nThat's you, Oufaa! üíï‚ú®";
        let i = 0;
        function typeWriter() {
            if (i < text.length) {
                document.getElementById("typing").innerHTML += 
                    (text.charAt(i) === "\n" ? "<br>" : text.charAt(i));
                i++;
                setTimeout(typeWriter, 60);
            }
        }

        function typeElement(el, txt, speed = 50, delay = 0) {
            let j = 0;
            setTimeout(() => {
                const interval = setInterval(() => {
                    if (j < txt.length) {
                        el.innerHTML += txt.charAt(j);
                        j++;
                    } else clearInterval(interval);
                }, speed);
            }, delay * 1000);
        }

        const unlockBtn = document.getElementById("unlockBtn");
        const passwordInput = document.getElementById("password");

        function unlockContent() {
            const pass = passwordInput.value.trim().toLowerCase();
            if (pass === "forever") {
                document.getElementById("content").style.display = "block";

                heartbeat.currentTime = 0; heartbeat.volume = 0.4; heartbeat.play().catch(e => console.log("Heartbeat:", e));
                bgMusic.currentTime = 0; bgMusic.volume = 0.25; bgMusic.play().catch(e => console.log("Piano:", e));
                whoosh.currentTime = 0; whoosh.play();
                sparkle.currentTime = 0; sparkle.play();

                lightning();
                startLoveTimer();
                createHearts(50);
                createShootingStars(15);
                addSparkles(150);

                ripple.style.animation = 'none'; ripple.offsetHeight; ripple.style.animation = 'rippleWave 3s ease-out';

                finalHeart.style.opacity = 1;
                finalHeart.style.animation = 'bigHeartPulse 6s ease-in-out forwards';

                // Trigger confetti burst!
                confettiBurst();

                typeElement(document.getElementById("loveNote"), "Every single day I wake up grateful that the universe led me to you.\nYou are my safe place, my biggest smile, my reason to believe in forever.", 40, 1.5);
                typeElement(document.getElementById("memoryText"), "And if I had to choose again... I would still choose you. Every time. In every lifetime.", 50, 4);

                passwordInput.style.display = "none";
                unlockBtn.style.display = "none";
            } else {
                alert("Oopsie! That's not our special word... Try again cutie üòòüíï");
            }
        }

        unlockBtn.addEventListener("click", unlockContent);
        passwordInput.addEventListener("keypress", (e) => { if (e.key === "Enter") unlockContent(); });

        function lightning() {
            const flash = document.getElementById("flash");
            flash.style.opacity = 0.7;
            whoosh.play();
            setTimeout(() => { flash.style.opacity = 0; }, 400);
        }

        function startLoveTimer() {
            const startDate = new Date("2025-01-01");
            setInterval(() => {
                const now = new Date();
                const diff = now - startDate;
                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                document.getElementById("loveTimer").innerText = 
                    `We've been writing our love story for ${days} magical days... üíñüåü`;
            }, 1000);
        }

        function createHearts(count) {
            const colors = ['#ff69b4', '#ff1493', '#ffb6c1', '#db7093', '#ffc0cb', '#ff85c2'];
            for (let i = 0; i < count; i++) {
                const heart = document.createElement("div");
                heart.classList.add("heart");
                heart.innerHTML = ["üíñ","‚ù§Ô∏è","üíó","üíû","üíì"][Math.floor(Math.random()*5)];
                heart.style.left = Math.random() * 100 + "%";
                heart.style.color = colors[Math.floor(Math.random() * colors.length)];
                heart.style.animationDuration = (5 + Math.random() * 10) + "s";
                heart.style.animationDelay = Math.random() * 5 + "s";
                document.body.appendChild(heart);
                setTimeout(() => heart.remove(), 15000);
            }
        }

        function createShootingStars(count) {
            for (let i = 0; i < count; i++) {
                const star = document.createElement("div");
                star.classList.add("shooting-star");
                star.style.top = Math.random() * 80 + "%";
                star.style.left = Math.random() * 100 + "%";
                star.style.animationDelay = Math.random() * 6 + "s";
                document.body.appendChild(star);
                setTimeout(() => star.remove(), 10000);
            }
        }

        function addSparkles(count) {
            for (let i = 0; i < count; i++) {
                const sparkleEl = document.createElement("div");
                sparkleEl.classList.add("sparkle");
                sparkleEl.style.left = Math.random() * 100 + "%";
                sparkleEl.style.top = Math.random() * 100 + "%";
                sparkleEl.style.animationDelay = Math.random() * 4 + "s";
                document.body.appendChild(sparkleEl);
                setTimeout(() => sparkleEl.remove(), 7000);
            }
        }
    });
    </script>

</body>
</html>

